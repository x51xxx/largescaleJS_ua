<!-- ### Давайте обговоримо вашу існуючу архітектуру -->

{:.message}
Працюючи над великим JavaScript-додатком, не забувайте приділяти **достатню
кількість часу** на планування початкової архітектури, до якої такі
програми дуже чутливі. Великі програми зазвичай представляють
з себе дуже складні системи, набагато більш складні, ніж ви уявляєте
собі спочатку.

Я повинен підкреслити значення цієї різниці - я бачив розробників, які,
стикаючись з великими додатками, робили крок назад і казали: «Добре,
у мене є кілька ідей, які добре показали себе в моєму попередньому
проект середнього масштабу. Думаю, вони точно спрацюють і для чогось більшого,
чи не так?». Звісно, до якогось моменту це може бути так, але, будь ласка,
не приймайте це як належне - здебільшого великі програми мають ряд
досить серйозних проблем, з якими потрібно рахуватися. Нижче я приведу
кілька аргументів на користь того, чому вам варто приділити трохи більше часу
планування архітектури свого додатку, і що вам це буде корисно
у довгостроковій перспективі.

Більшість JavaScript-розробників в архітектурі своїх додатків зазвичай
використовує різні комбінації наступних компонентів:

*   віджети
*   моделі
*   представления
*   контролери
*   шаблони
*   бібліотеки
*   ядро програми.

{:class="message"}
**Посилання по темі:**
[Ребекка Мерфі - Створення архітектури JavaScript-додатків][1]
[Пітер Мішо - архітектура MVC для JavaScript-додатків][2]
[StackOverflow - Дискусія по сучасних MVC-фреймворках][3]
[Дуг Найнер - Підтримуваємі плагіни і фабрика віджетів][4]


Ймовірно, ви виносите різні функції ваших додатків в окремі модулі,
чи використовуєте які-небудь інші шаблони проектування для подібного
поділу. Це дуже добре, але тут є низка потенційних проблем,
з якими ви можете зіткнутися при такому підході.


### 1. Чи готова ваша архітектура до повторного використання коду вже зараз?

Чи можуть окремі модулі використовуватися самостійно? Чи достатньо вони
автономні для цього? Міг би я прямо зараз взяти один з модулів вашого великого
додатку, просто помістити його на нову веб-сторінку, а потім тут же почати
його використовувати? У вас може виникнути питання: «Чи справді це так
необхідно?», але, як би там не було, я сподіваюся, що ви думаєте про майбутнє. Що,
якщо ваша компанія почне створювати все більше і більше нетривіальних
додатків, які будуть мати деяку загальну функціональність? Якщо хтось
скаже: «Нашим користувачам дуже подобається використовувати модуль чату в нашому
email-клієнті, чому б нам не додати цей модуль до нашого нового додатка для
спільної роботи з докуменатми?», чи це можливо, якщо ми не приділимо
належної уваги контролю коду?


### 2. Скільки модулів у вашій системі залежить від інших модулів?

Наскільки сильно пов'язані ваші модулі? Перед тим, як я порину в пояснення,
про те, як важлива слабка зв'язаність модулів, я повинен відзначити, що не завжди є
можливість створювати модулі, які не мають абсолютно ніяких залежностей
в системі. Приміром, одні модулі можуть розширювати функції інших, вже існуючих.
Ця тема, швидше за все, відноситься до угруповання модулів на основі деякого
функціоналу. Окремі набори модулів повинні працювати в програмі без
великої кількості залежностей, щоб наявність або завантаження модулів
не впливала на їх працездатність.


### 3. Чи зможе ваш додаток працювати далі, якщо його окрема частина зламається?

Якщо ви розробляєте програми подібні Gmail, і ваш webmail-модуль (або
група модулів) перестане працювати через помилки, то це не повинно заблокувати
користувальницький інтерфейс, або перешкодити користувачам використовувати інші частини
вашого додатки, наприклад, такі як чат. У той же час, як було сказано
раніше, було б ідеально, якби модулі могли працювати і за межами вашої
архітектури. В моїй лекції я згадував динамічні залежності - можливість
завантажувати модулі виходячи з певних дій користувача. Наприклад,
хлопці з Gmail могли б спочатку тримати чат закритим, не завантажуючи його
код при відкритті сторінки. А в той момент, коли користувач вирішить
скористатися ним - відповідний модуль буде динамічно завантажений і
виконаний. В ідеальному випадку, хотілося б виконати це без якихось негативних
ефектів у вашому додатку.


### 4. Наскільки легко ви зможете тестувати окремі модулі?

Коли ви працюєте над масштабними системами, є ймовірність, що
різні частини цієї системи будуть використовувати мільйони користувачів.
Цілком ймовірно, що ці частини будуть використовуватися не тільки в передбачених
вами ситуаціях. У кінцевому рахунку, код може використовуватися повторно в величезному
кількості різних оточень, і важливо, щоб модулі були досить
протестовані. Тестувати модулі необхідно і всередині архітектури для якої
він був спочатку розроблений, і зовні. На мою думку, це дає найбільшу
гарантію того, що модуль не зламається при попаданні в іншу систему.

[1]: http://blog.rebeccamurphey.com/code-org-take-2-structuring-javascript-applic
[2]: http://michaux.ca/articles/mvc-architecture-for-javascript-applications
[3]: http://stackoverflow.com/questions/5112899/knockout-js-vs-backbone-js-vs
[4]: http://msdn.microsoft.com/en-us/scriptjunkie/ff706600
